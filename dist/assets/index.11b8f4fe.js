import{g as y,h as X,i as Y,j as K,k as D,l as Q,c as k,m as c,n as I,v as L,p as b,t as z,u as f,q as R,F as j,s as T,x as U,b as H,y as Z,z as ee,o as N,A as te}from"./vendor.012f9502.js";var A={itemWidth:30,itemHeight:30,preset:{low:{width:9,height:9,mineNum:10},medium:{width:16,height:16,mineNum:40},high:{width:30,height:16,mineNum:99}}};const W=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],ne=new Map([[1,"#021AFF"],[2,"#1E8000"],[3,"#F80701"],[4,"#010780"],[5,"#800201"],[6,"red"],[7,"red"],[8,"red"]]);function se(s){return X()?(Y(s),!0):!1}const ie=typeof window!="undefined";function ue(s,t=1e3,n={}){const{immediate:m=!0,immediateCallback:a=!1}=n;let i=null;const d=y(!1);function S(){i&&(clearInterval(i),i=null)}function x(){d.value=!1,S()}function g(){t<=0||(d.value=!0,a&&s(),S(),i=setInterval(s,t))}return m&&ie&&g(),se(x),{isActive:d,pause:x,resume:g}}var le=Object.defineProperty,J=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,q=(s,t,n)=>t in s?le(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,ae=(s,t)=>{for(var n in t||(t={}))re.call(t,n)&&q(s,n,t[n]);if(J)for(var n of J(t))oe.call(t,n)&&q(s,n,t[n]);return s};function me(s=1e3,t={}){const{controls:n=!1,immediate:m=!0}=t,a=y(0),i=ue(()=>a.value+=1,s,{immediate:m});return n?ae({counter:a},i):a}const ce=s=>{let{width:t,height:n,mineNum:m}=s.value,a=y(m);K(s,()=>{t=s.value.width,n=s.value.height,a.value=m=s.value.mineNum});let i=y([]);const{counter:d,pause:S,resume:x}=me(1e3,{immediate:!1,controls:!0});let g=y(!1),$=D(()=>B.value===s.value.width*s.value.height),B=D(()=>i.value.flat().filter(e=>e.isShow||e.isMark).length);const E=()=>{d.value=0,x(),M();let e=new Array(t*n).fill("").map((r,h)=>h+1);he(e,m).forEach(r=>{let h=Math.floor(r/t),p=r%t-1;r%t==0&&(h=h-1,p=t-1),i.value[h][p].isMine=!0}),O(W)},M=()=>{for(let e=0;e<n;e++){let l=[];for(let r=0;r<t;r++)l.push({isShow:!1,mineNum:0,isMine:!1,isMark:!1,pos:{y:e,x:r}});i.value.push(l)}},O=e=>{for(let l=0;l<n;l++)for(let r=0;r<t;r++)if(!i.value[l][r].isMine){let h=0;_(e,l,r,(p,F)=>{i.value[p][F].isMine&&h++}),h===0||(i.value[l][r].mineNum=h)}},_=(e,l,r,h)=>{for(let p=0;p<e.length;p++){const[F,G]=e[p];let P=l+F,V=r+G;P>=0&&P<n&&V>=0&&V<t&&h(P,V)}},w=()=>{for(let e=0;e<n;e++)for(let l=0;l<t;l++)i.value[e][l].isMine&&!i.value[e][l].isMark&&(i.value[e][l].isShow=!0)},u=()=>{i.value=[],g.value=!1,a.value=s.value.mineNum,E()},o=e=>{if(!(g.value||$.value)&&!e.isShow){if(e.isMark){e.isMark=!1;return}e.isShow=!0,e.isMine&&(e.hitMine=!0,g.value=!0,w(),S()),e.mineNum===0&&v(e.pos.y,e.pos.x)}},v=(e,l)=>{_(W,e,l,(r,h)=>{let p=i.value[r][h];const F=p.isShow;p.isShow=!0,p.mineNum===0&&!F&&v(r,h)})},C=e=>{a.value!==0&&(e.isMark||(e.isMark=!0,a.value--))};return E(),{list:i,showAll:w,reset:u,mineHandle:o,markMine:C,markNum:a,gameover:g,gamewin:$,counter:d}},he=function(s,t){let n=s.slice(0),m=n.length;for(;m>1;){let a=Math.floor(Math.random()*m);m--;let i=n[m];n[m]=n[a],n[a]=i}return n.slice(0,t)};const ve={class:"sweeper-wrapper"},pe=c("h1",null,"\u626B\u96F7",-1),fe={class:"action-wrapper"},de={key:0,class:"custom-input-wrapper"},we=H(" \u6A2A\u5411\uFF1A "),ge=H(" \u7AD6\u5411\uFF1A "),Me=H(" \u96F7\u6570\uFF1A "),ke={class:"info-wrapper"},Ne=["onClick","onContextmenu"],_e={key:0},Se=Q({setup(s){Z(w=>({ce104ad8:n.width,"6c347e19":n.height}));const t=y(A.preset.medium),n={width:`${A.itemWidth}px`,height:`${A.itemHeight}px`},m=D(()=>({width:`${t.value.width*A.itemWidth}px`})),a=w=>{const{isShow:u,isMine:o,isMark:v,hitMine:C}=w;let e="";return v?e="isMarkShow":u&&(o?e=C?"isRedMineShow":"isMineShow":e="isShow"),["mineField",e]},{list:i,reset:d,mineHandle:S,markMine:x,markNum:g,gameover:$,gamewin:B,counter:E}=ce(t),M=y({width:12,height:12,mineNum:25}),O=y("medium"),_=w=>{O.value=w,w==="custom"?t.value=JSON.parse(JSON.stringify(M.value)):t.value=A.preset[w],ee(()=>{d()})};return(w,u)=>(N(),k("section",ve,[pe,c("div",fe,[c("span",{class:"btn",onClick:u[0]||(u[0]=o=>_("low"))},"\u57FA\u7840"),c("span",{class:"btn",onClick:u[1]||(u[1]=o=>_("medium"))},"\u4E2D\u7EA7"),c("span",{class:"btn",onClick:u[2]||(u[2]=o=>_("high"))},"\u4E13\u5BB6"),c("span",{class:"btn",onClick:u[3]||(u[3]=o=>_("custom"))},"\u81EA\u5B9A\u4E49")]),O.value==="custom"?(N(),k("div",de,[we,I(c("input",{type:"text","onUpdate:modelValue":u[4]||(u[4]=o=>M.value.width=o)},null,512),[[L,M.value.width]]),ge,I(c("input",{type:"text","onUpdate:modelValue":u[5]||(u[5]=o=>M.value.height=o)},null,512),[[L,M.value.height]]),Me,I(c("input",{type:"text","onUpdate:modelValue":u[6]||(u[6]=o=>M.value.mineNum=o)},null,512),[[L,M.value.mineNum]]),c("button",{onClick:u[7]||(u[7]=o=>_("custom"))},"\u786E\u8BA4")])):b("",!0),c("div",ke,[c("span",null,z(f(g)),1),c("i",{class:R(["iconfont emoj",f($)?"icon-bukaixin":f(B)?"icon-xiaolian-":"icon-kaixin"]),onClick:u[8]||(u[8]=(...o)=>f(d)&&f(d)(...o))},null,2),c("span",null,z(f(E)),1)]),c("section",{class:"game-wrapper",style:U(f(m))},[(N(!0),k(j,null,T(f(i),o=>(N(),k(j,null,[(N(!0),k(j,null,T(o,v=>(N(),k("div",{class:R(["",a(v)]),onClick:C=>f(S)(v),onContextmenu:te(C=>f(x)(v),["prevent"])},[v.isShow?(N(),k(j,{key:0},[v.isMine?(N(),k("span",_e,"x")):b("",!0),v.mineNum?(N(),k("span",{key:1,class:"mineNum",style:U({color:f(ne).get(v.mineNum)})},z(v.mineNum),5)):b("",!0)],64)):b("",!0)],42,Ne))),256))],64))),256))],4)]))}});export{Se as default};
